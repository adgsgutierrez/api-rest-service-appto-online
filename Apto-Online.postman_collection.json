{
	"info": {
		"_postman_id": "71fe9023-0a9d-4512-bf93-473c26bf45c9",
		"name": "Apto Online",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "general",
			"item": [
				{
					"name": "Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{protocol}}://{{host}}/api/utilities/status",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"utilities",
								"status"
							]
						}
					},
					"response": []
				},
				{
					"name": "Token",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"serial\": \"{{appto_serial}}\",\n    \"client\": \"{{appto_client}}\",\n    \"client_secret\": \"{{appto_client_secret}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{protocol}}://{{host}}/api/utilities/token",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"utilities",
								"token"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "usuario",
			"item": [
				{
					"name": "Login",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"warning": "This is a duplicate header and will be overridden by the Authorization header generated by Postman.",
								"key": "Authorization",
								"value": "{{appto_token_authorization}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"user\": \"adgsgutierrez@gmail.com\",\n    \"password\": \"America*12\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{protocol}}://{{host}}/api/user/login",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"user",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Register",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{appto_token_authorization}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Joe Doe\",\n    \"email\": \"adgsgutierrez@gmail.com\",\n    \"residential\": {\n        \"id\": \"XcADSXE71b7ikNY1eT5m\",\n        \"address\": \"Av Calle 63 No 73 - 13\",\n        \"name\": \"Conjunto Residencial Colon\"\n    },\n    \"tower\": \"A\",\n    \"number\": \"105\",\n    \"password\": \"America*12\",\n    \"validatePassword\": \"America*12\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{protocol}}://{{host}}/api/user/register",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"user",
								"register"
							]
						}
					},
					"response": []
				},
				{
					"name": "Validate",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{appto_token_authorization}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "",
									"value": "",
									"type": "default",
									"disabled": true
								}
							]
						},
						"url": {
							"raw": "{{protocol}}://{{host}}/api/user/validate?id=OWIyMTljZjgtN2ZlNC00MzZjLThjNjQtOTcwOTYxZWRkOTFi",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"user",
								"validate"
							],
							"query": [
								{
									"key": "id",
									"value": "OWIyMTljZjgtN2ZlNC00MzZjLThjNjQtOTcwOTYxZWRkOTFi"
								}
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Conjunto",
			"item": [
				{
					"name": "Listar todos los conjuntos",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{appto_token_authorization}}",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{protocol}}://{{host}}/api/residential/list",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"residential",
								"list"
							]
						}
					},
					"response": []
				},
				{
					"name": "Guardar conjunto",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{appto_token_authorization}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"address\": \"Av Calle 63 No 73 - 13\",\n    \"name\": \"Conjunto Residencial Colon\",\n    \"lat\": 4.6759457,\n    \"long\": -74.1054309,\n    \"nameAdministrator\": \"Joe Doe\",\n    \"email\": \"admin@conjuntocolon.com\",\n    \"phone\": \"311-4567889\",\n    \"localPhone\": \"(601) 5789123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{protocol}}://{{host}}/api/residential",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"residential"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "locations",
			"item": [
				{
					"name": "Listar ubicaciones del conjunto",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{appto_token_authorization}}",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{protocol}}://{{host}}/api/location/list?idResidential=dLPt2YDC1RnbzSJKSQXg",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"location",
								"list"
							],
							"query": [
								{
									"key": "idResidential",
									"value": "dLPt2YDC1RnbzSJKSQXg"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Listar mis reservas",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{appto_token_authorization}}",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{protocol}}://{{host}}/api/location/list?idResidential=dLPt2YDC1RnbzSJKSQXg&email=adgsgutierrez@gmail.com",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"location",
								"list"
							],
							"query": [
								{
									"key": "idResidential",
									"value": "dLPt2YDC1RnbzSJKSQXg"
								},
								{
									"key": "email",
									"value": "adgsgutierrez@gmail.com"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Guardar ubicaciones del conjunto",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{appto_token_authorization}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"idResidential\": \"dLPt2YDC1RnbzSJKSQXg\",\n    \"location\": {\n        \"name\": \"Piscina\",\n        \"open\": \"01-01-1900 07:00:00\",\n        \"close\": \"01-01-3000 21:00:00\",\n        \"days\": [\"L\",\"M\",\"W\",\"J\",\"V\",\"S\"],\n        \"active\": true,\n        \"timeForLocation\": 60\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{protocol}}://{{host}}/api/location",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"location"
							]
						}
					},
					"response": []
				},
				{
					"name": "Reversar ubicaciones del conjunto",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{appto_token_authorization}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"idResidential\": \"dLPt2YDC1RnbzSJKSQXg\",\n    \"location\": {\n        \"name\": \"Piscina\",\n        \"start\": \"2024-05-19 : 17:00:00\",\n        \"end\": \"2024-05-19 : 18:00:00\"\n    },\n    \"user\": {\n        \"name\": \"Joe Doe\",\n        \"email\": \"lesliperez.p@gmail.com\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{protocol}}://{{host}}/api/location/reserve",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"location",
								"reserve"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "parking",
			"item": [
				{
					"name": "Listar mis reservas de parqueadero",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{appto_token_authorization}}",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{protocol}}://{{host}}/api/parking/list/me?idResidential=dLPt2YDC1RnbzSJKSQXg&email=adgsgutierrez@gmail.com",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"parking",
								"list",
								"me"
							],
							"query": [
								{
									"key": "idResidential",
									"value": "dLPt2YDC1RnbzSJKSQXg"
								},
								{
									"key": "email",
									"value": "adgsgutierrez@gmail.com"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Crear reserva de parqueadero",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{appto_token_authorization}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"type\": \"M\",\n    \"plate\": \"WER-45D\",\n    \"dateInitial\": \"2024-06-12T16:00:00\",\n    \"dateEnd\": \"2024-06-12T20:00:00\",\n    \"user\": {\n        \"email\": \"lesliperez@gmail.com\",\n        \"name\": \"Joe Doe\"\n    },\n    \"idResidential\": \"dLPt2YDC1RnbzSJKSQXg\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{protocol}}://{{host}}/api/parking",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"parking"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Voucher",
			"item": [
				{
					"name": "Subir comprobante voucher",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{appto_token_authorization}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "voucher",
									"type": "file",
									"src": "/Users/AGUIT39/Downloads/imagen (6).png"
								},
								{
									"key": "email",
									"value": "adgsgutierrez@gmail.com",
									"type": "default"
								},
								{
									"key": "idResidentials",
									"value": "dLPt2YDC1RnbzSJKSQXg",
									"type": "default"
								},
								{
									"key": "verify",
									"value": "false",
									"type": "default",
									"disabled": true
								}
							]
						},
						"url": {
							"raw": "{{protocol}}://{{host}}/api/voucher",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"voucher"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "notification",
			"item": [
				{
					"name": "Listar notificaciones",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{appto_token_authorization}}",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{protocol}}://{{host}}/api/notification/dLPt2YDC1RnbzSJKSQXg",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"notification",
								"dLPt2YDC1RnbzSJKSQXg"
							]
						}
					},
					"response": []
				},
				{
					"name": "Crear notificacion",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{appto_token_authorization}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "/Users/AGUIT39/Downloads/Comprobante_Transferencia_Boton.pdf"
								},
								{
									"key": "name",
									"value": "Manual de convivencia",
									"type": "default"
								}
							]
						},
						"url": {
							"raw": "{{protocol}}://{{host}}/api/notification/dLPt2YDC1RnbzSJKSQXg",
							"protocol": "{{protocol}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"api",
								"notification",
								"dLPt2YDC1RnbzSJKSQXg"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"const protocol = pm.variables.get(\"protocol\");",
					"const host = pm.variables.get(\"host\");",
					"const url = `${protocol}://${host}/api/utilities/token`;",
					"",
					"pm.sendRequest({",
					"    url: url,",
					"    method: 'POST',",
					"    header: { 'content-type': 'application/json' },",
					"    body: {",
					"        mode: 'raw',",
					"        raw: {",
					"            serial: pm.variables.get(\"appto_serial\"),",
					"            client: pm.variables.get(\"appto_client\"),",
					"            client_secret: pm.variables.get(\"appto_client_secret\")",
					"        }",
					"    }",
					"}, function (err, _response) {",
					"    const response = _response.json();",
					"    console.log(response);",
					"    if (response && response.code === 200 ){",
					"        const token = `${response.data.type} ${response.data.token}`;",
					"        pm.environment.set(\"appto_token_authorization\", token);",
					"    }",
					"});"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}